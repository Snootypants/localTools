<!DOCTYPE html>
<!-- LocalTools single-page YouTube downloader interface. -->
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LocalTools • YouTube Downloader</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  </head>
  <body>
    <div class="app-shell">
      <div class="glow glow-one" aria-hidden="true"></div>
      <div class="glow glow-two" aria-hidden="true"></div>
      <main class="layout">
        <header class="masthead">
          <p class="badge">Local • Private Beta</p>
          <h1>Local YouTube Downloader</h1>
          <p class="lede">
            Paste any public YouTube link, inspect the metadata, and pull down audio or video without touching the cloud.
          </p>
        </header>

        <section class="grid">
          <article class="panel form-panel">
            <div class="field-group">
              <label for="videoUrl">YouTube URL</label>
              <div class="field-row">
                <input id="videoUrl" name="videoUrl" type="url" placeholder="https://www.youtube.com/watch?v=dQw4w9WgXcQ" />
                <button type="button" id="fetchBtn" class="primary">Fetch Info</button>
              </div>
            </div>

            <div class="field-group">
              <label for="saveDirInput">Save Location</label>
              <div class="field-row">
                <input id="saveDirInput" name="saveDirInput" type="text" value="{{ default_download_dir }}" />
                <button type="button" id="saveDirReset" class="ghost">Reset</button>
              </div>
              <p class="helper-text">
                Files will save to <span id="saveDirDisplay">{{ default_download_dir }}</span>
              </p>
            </div>

            <div class="field-grid">
              <div>
                <label for="resolutionSelect">Resolution</label>
                <select id="resolutionSelect" disabled>
                  <option value="" selected hidden>Fetch info to list resolutions</option>
                </select>
              </div>
              <div>
                <label for="formatSelect">Format Variant</label>
                <select id="formatSelect" disabled>
                  <option value="" selected hidden>Fetch info to list formats</option>
                </select>
              </div>
              <div>
                <label for="downloadType">Download Type</label>
                <select id="downloadType">
                  <option value="video" selected>Video</option>
                  <option value="audio">Audio (MP3)</option>
                </select>
              </div>
            </div>

            <div class="actions">
              <button type="button" id="downloadBtn" class="secondary" disabled>
                <span class="icon" aria-hidden="true">⬇︎</span>
                <span class="label">Download</span>
              </button>
              <div class="progress-wrapper" id="progressWrapper" hidden>
                <div class="progress-track" id="progressTrack">
                  <div class="progress-bar" id="progressBar"></div>
                </div>
                <span class="progress-label" id="progressLabel">0%</span>
              </div>
              <p class="status" id="status">Paste a link to get started.</p>
            </div>
          </article>

          <article class="panel preview-panel" id="infoPanel" hidden>
            <div class="preview-thumb">
              <img id="thumbnail" alt="Video thumbnail" />
              <span class="duration-chip" id="duration">00:00</span>
            </div>
            <div class="preview-meta">
              <p class="eyebrow" id="uploader">Uploader pending…</p>
              <h2 id="title">Metadata preview will appear here.</h2>
              <dl>
                <div>
                  <dt>Total Formats</dt>
                  <dd id="formatCount">0</dd>
                </div>
                <div>
                  <dt>Selection</dt>
                  <dd id="selectedType">Video</dd>
                </div>
              </dl>
              <div class="description-block">
                <p class="description-label">Description</p>
                <p class="description-text" id="description">
                  Description from the uploader will appear here after fetching metadata.
                </p>
              </div>
            </div>
          </article>
        </section>
      </main>
    </div>

    <script>
      window.APP_CONFIG = {
        defaultSaveDir: "{{ default_download_dir }}",
        baseDir: "{{ base_dir }}"
      };
    </script>
    <script src="{{ url_for('static', filename='script.js') }}" defer></script>
  </body>
</html>
